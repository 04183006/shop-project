{"remainingRequest":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\src\\views\\home\\Home.vue","mtime":1582030126852},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZCYXIgZnJvbSAiY29tcG9uZW50cy9jb21tb24vbmF2YmFyL05hdkJhciI7CgppbXBvcnQgSG9tZVN3aXBlciBmcm9tICIuL2NoaWxkQ29tcHMvSG9tZVN3aXBlciI7CgppbXBvcnQgUmVjb21tZW5kVmlldyBmcm9tICIuL2NoaWxkQ29tcHMvUmVjb21tZW5kVmlldyI7CgppbXBvcnQgRmVhdHVyZVZpZXcgZnJvbSAiLi9jaGlsZENvbXBzL0ZlYXR1cmVWaWV3IjsKCmltcG9ydCBUYWJDb250cm9sIGZyb20gImNvbXBvbmVudHMvY29udGVudC90YWJDb250cm9sL1RhYkNvbnRyb2wiOwoKaW1wb3J0IEdvb2RzTGlzdCBmcm9tICJjb21wb25lbnRzL2NvbnRlbnQvZ29vZHMvR29vZHNMaXN0IjsKCmltcG9ydCBCU2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwiOwoKaW1wb3J0IEJhY2tUb3AgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L2JhY2tUb3AvQmFja1RvcCcKCmltcG9ydCB7IGdldEhvbWVNdWx0aWRhdGEsIGdldEhvbWVHb29kcyB9IGZyb20gIm5ldHdvcmsvaG9tZSI7CgppbXBvcnQge2RlYm91bmNlfSBmcm9tICdjb21tb24vdXRpbHMnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhbm5lcnM6IFt7fSwge30sIHt9LCB7fV0sCiAgICAgIHJlY29tbWVuZHM6IFtdLAogICAgICBjdXJyZW50VHlwZTogInBvcCIsCiAgICAgIHNjcm9sbDogbnVsbCwKICAgICAgaXNTaG93OmZhbHNlLAogICAgICB0YWJPZmZzZXRUb3A6MCwKICAgICAgaXNGaXhlZDpmYWxzZSwKICAgICAgc2F2ZVk6JycsCiAgICAgIGdvb2RzOiB7CiAgICAgICAgcG9wOiB7IHBhZ2U6IDAsIGxpc3Q6IFtdIH0sCiAgICAgICAgbmV3OiB7IHBhZ2U6IDAsIGxpc3Q6IFtdIH0sCiAgICAgICAgc2VsbDogeyBwYWdlOiAwLCBsaXN0OiBbXSB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBOYXZCYXIsCiAgICBIb21lU3dpcGVyLAogICAgUmVjb21tZW5kVmlldywKICAgIEZlYXR1cmVWaWV3LAogICAgVGFiQ29udHJvbCwKICAgIEdvb2RzTGlzdCwKICAgIEJTY3JvbGwsCiAgICBCYWNrVG9wCiAgfSwKICBhY3RpdmF0ZWQoKXsKICAgIGNvbnNvbGUubG9nKHRoaXMuc2F2ZVkpOwogICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwgdGhpcy5zYXZlWSwgMCk7CiAgICB0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoKCk7CiAgfSwKICBkZWFjdGl2YXRlZCgpewogICAgdGhpcy5zYXZlWSA9IHRoaXMuJHJlZnMuc2Nyb2xsLmdldFNjcm9sbFkoKTsKICAgIGNvbnNvbGUubG9nKHRoaXMuc2F2ZVkpCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8xLuivt+axguWkmuS4quaVsOaNru+8iOS4u+imgeaYr+i9ruaSreWbvuWSjOS4i+mdoueahOaVsOaNru+8iQogICAgdGhpcy5nZXRIb21lTXVsdGlkYXRhKCk7CgogICAgLy8yLuivt+axguS4i+mdoueahOWVhuWTgeaVsOaNrgogICAgdGhpcy5nZXRIb21lR29vZHMoInBvcCIpOwogICAgdGhpcy5nZXRIb21lR29vZHMoIm5ldyIpOwogICAgdGhpcy5nZXRIb21lR29vZHMoInNlbGwiKTsKICB9LCAKICAgbW91bnRlZCgpIHsKICAgIC8vMS7nm5HlkKxpdGVt5Zu+54mH5Yqg6L295a6M5oiQCiAgICBjb25zdCByZWZyZXNoID0gZGVib3VuY2UodGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCw1MDApCiAgICB0aGlzLiRidXMuJG9uKCJpdGVtSW1hZ2VMb2FkIiwgKCkgPT4gewogICAgICByZWZyZXNoKCkKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgCgogICAgLyoqCiAgICAgKiDkuovku7bnm5HlkKznm7jlhbPmlrnms5UKICAgICAqLwogICAgdGFiQ2xpY2soaW5kZXgpIHsKICAgICAgc3dpdGNoIChpbmRleCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRoaXMuY3VycmVudFR5cGUgPSAicG9wIjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMToKICAgICAgICAgIHRoaXMuY3VycmVudFR5cGUgPSAibmV3IjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRoaXMuY3VycmVudFR5cGUgPSAic2VsbCI7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLy/ov5nmoLflrp7njrDnu5nkuKTkuKp0YWJDb250cm9s5L+d5oyB5LiA6Ie0CiAgICAgIHRoaXMuJHJlZnMudGFiQ29udHJvbDEuY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMuJHJlZnMudGFiQ29udHJvbDEuY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICB9LAogICAgc3dpcGVySW1hZ2UoKXsKICAgICAgICAgLy8yLuiOt+WPlnRhYkNvbnRyb2znmoRvZmZlc2V0VG9wCiAgICB0aGlzLnRhYk9mZnNldFRvcCA9IHRoaXMuJHJlZnMudGFiQ29udHJvbDIuJGVsLm9mZnNldFRvcDsKICAgIH0sCiAgICAvKioKICAgICAqIOe9kee7nOivt+axguebuOWFs+aWueazlQogICAgICovCiAgICBnZXRIb21lTXVsdGlkYXRhKCkgewogICAgICBnZXRIb21lTXVsdGlkYXRhKCkudGhlbihyZXMgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgLy/lpITnkIbmlbDmja4KICAgICAgICB0aGlzLmJhbm5lcnMgPSByZXMuZGF0YS5iYW5uZXIubGlzdDsgLy/lsIbor7fmsYLnmoTmlbDmja7lrZjlgqjotbfmnaXvvIzpgb/lhY3ooqvlnoPlnL7lm57mlLYKICAgICAgICB0aGlzLnJlY29tbWVuZHMgPSByZXMuZGF0YS5yZWNvbW1lbmQubGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0SG9tZUdvb2RzKHR5cGUpIHsKICAgICAgY29uc3QgcGFnZSA9IHRoaXMuZ29vZHNbdHlwZV0ucGFnZSArIDE7IC8v6K+35rGC5LiL5LiA6aG1CiAgICAgIGdldEhvbWVHb29kcyh0eXBlLCBwYWdlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKSAgLy9wb3Ag56ys5LiA6aG155qE5YmNMzDmnaHmlbDmja4KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5saXN0KQogICAgICAgIHRoaXMuZ29vZHNbdHlwZV0ubGlzdC5wdXNoKC4uLnJlcy5kYXRhLmxpc3QpOwogICAgICAgIHRoaXMuZ29vZHNbdHlwZV0ucGFnZSArPSAxOwogICAgICAgIC8v5aSa5LqG5LiA57uE5pWw5o2u5bCx6KaBcGFnZSsxCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5nb29kcyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog6L+U5Zue6aG26YOoYmFja3RvcOWHveaVsAogICAgICovCiAgICBiYWNrVG9wKCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdiYWNrVG9wJyk7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnNjcm9sbFRvKDAsMCkKICAgIH0sCiAgICBjb250ZW50U2Nyb2xsKHBvc2l0aW9uKXsKICAgICAgLy8xLuWIpOaWrWJhY2tUb3DmmK/lkKbmmL7npLoKICAgICAgLy/lpKfkuo4xMDAw6K6+572u5Li6dHJ1Ze+8jOWwj+S6jjEwMDDorr7nva7kuLpmYWxzZQogICAgICB0aGlzLmlzU2hvdyA9ICgtcG9zaXRpb24ueSkgPiAxMDAwOwoKICAgICAgLy8yLuWIpOaWrXRhYkNvbnRyb2zmmK/lkKblkLjpobbmlYjmnpx7cG9zaXRpb246ZmlleGQ7fQogICAgICB0aGlzLmlzRml4ZWQgPSAoLXBvc2l0aW9uLnkpID4gdGhpcy50YWJPZmZzZXRUb3A7CgogICAgfSwKCiAgICAgLyoqCiAgICog5LiK5ouJ5Yqg6L295pu05aSaCiAgICovCiAgICBsb2FkTW9yZSgpewogICAgICAvLyBjb25zb2xlLmxvZygn5LiK5ouJ5Yqg6L295pu05aSaJykKICAgICAgdGhpcy5nZXRIb21lR29vZHModGhpcy5jdXJyZW50VHlwZSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ29vZHMubmV3LnBhZ2UpOwogICAgICB0aGlzLiRyZWZzLnNjcm9sbC5maW5pc2hlZFB1bGxVcCgpOwogICAgfQogIH0sCgogCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dHb29kcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZ29vZHNbdGhpcy5jdXJyZW50VHlwZV0ubGlzdDsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div id=\"home\">\n    <nav-bar class=\"home-nav\">\n      <div slot=\"center\">购物街</div>\n    </nav-bar>\n    <tab-control :titles=\"['流行','新款','精选']\" @tabClick=\"tabClick\" ref=\"tabControl1\" \n    v-show=\"isFixed\"  class=\"tab-control\" :class=\"{fiexd:isFixed}\"></tab-control>\n    <b-scroll class=\"content\" ref=\"scroll\"\n     :probe-type='3' \n     @scroll=\"contentScroll\"\n     :pull-up-load='true'\n     @pullingUp=\"loadMore\">\n      <home-swiper :banners=\"banners\" @swiperImageLoad=\"swiperImage\"></home-swiper>\n      <recommend-view :recommends=\"recommends\"></recommend-view>\n      <feature-view></feature-view>\n      <tab-control :titles=\"['流行','新款','精选']\" @tabClick=\"tabClick\" ref=\"tabControl2\"></tab-control>\n      <goods-list :goods=\"showGoods\"></goods-list>\n    </b-scroll>\n    <back-top @click.native=\"backTop\" v-show=\"isShow\"></back-top>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"components/common/navbar/NavBar\";\n\nimport HomeSwiper from \"./childComps/HomeSwiper\";\n\nimport RecommendView from \"./childComps/RecommendView\";\n\nimport FeatureView from \"./childComps/FeatureView\";\n\nimport TabControl from \"components/content/tabControl/TabControl\";\n\nimport GoodsList from \"components/content/goods/GoodsList\";\n\nimport BScroll from \"components/common/scroll/Scroll\";\n\nimport BackTop from 'components/content/backTop/BackTop'\n\nimport { getHomeMultidata, getHomeGoods } from \"network/home\";\n\nimport {debounce} from 'common/utils'\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      banners: [{}, {}, {}, {}],\n      recommends: [],\n      currentType: \"pop\",\n      scroll: null,\n      isShow:false,\n      tabOffsetTop:0,\n      isFixed:false,\n      saveY:'',\n      goods: {\n        pop: { page: 0, list: [] },\n        new: { page: 0, list: [] },\n        sell: { page: 0, list: [] }\n      }\n    };\n  },\n  components: {\n    NavBar,\n    HomeSwiper,\n    RecommendView,\n    FeatureView,\n    TabControl,\n    GoodsList,\n    BScroll,\n    BackTop\n  },\n  activated(){\n    console.log(this.saveY);\n    this.$refs.scroll.scrollTo(0, this.saveY, 0);\n    this.$refs.scroll.refresh();\n  },\n  deactivated(){\n    this.saveY = this.$refs.scroll.getScrollY();\n    console.log(this.saveY)\n  },\n  created() {\n    //1.请求多个数据（主要是轮播图和下面的数据）\n    this.getHomeMultidata();\n\n    //2.请求下面的商品数据\n    this.getHomeGoods(\"pop\");\n    this.getHomeGoods(\"new\");\n    this.getHomeGoods(\"sell\");\n  }, \n   mounted() {\n    //1.监听item图片加载完成\n    const refresh = debounce(this.$refs.scroll.refresh,500)\n    this.$bus.$on(\"itemImageLoad\", () => {\n      refresh()\n    });\n  },\n  methods: {\n    \n\n    /**\n     * 事件监听相关方法\n     */\n    tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = \"pop\";\n          break;\n        case 1:\n          this.currentType = \"new\";\n          break;\n        case 2:\n          this.currentType = \"sell\";\n          break;\n      }\n\n      //这样实现给两个tabControl保持一致\n      this.$refs.tabControl1.currentIndex = index;\n      this.$refs.tabControl1.currentIndex = index;\n    },\n    swiperImage(){\n         //2.获取tabControl的offesetTop\n    this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n    },\n    /**\n     * 网络请求相关方法\n     */\n    getHomeMultidata() {\n      getHomeMultidata().then(res => {\n        // console.log(res);\n        //处理数据\n        this.banners = res.data.banner.list; //将请求的数据存储起来，避免被垃圾回收\n        this.recommends = res.data.recommend.list;\n      });\n    },\n    getHomeGoods(type) {\n      const page = this.goods[type].page + 1; //请求下一页\n      getHomeGoods(type, page).then(res => {\n        // console.log(res)  //pop 第一页的前30条数据\n        // console.log(res.data.list)\n        this.goods[type].list.push(...res.data.list);\n        this.goods[type].page += 1;\n        //多了一组数据就要page+1\n        // console.log(this.goods);\n      });\n    },\n    /**\n     * 返回顶部backtop函数\n     */\n    backTop(){\n      // console.log('backTop');\n      this.$refs.scroll.scrollTo(0,0)\n    },\n    contentScroll(position){\n      //1.判断backTop是否显示\n      //大于1000设置为true，小于1000设置为false\n      this.isShow = (-position.y) > 1000;\n\n      //2.判断tabControl是否吸顶效果{position:fiexd;}\n      this.isFixed = (-position.y) > this.tabOffsetTop;\n\n    },\n\n     /**\n   * 上拉加载更多\n   */\n    loadMore(){\n      // console.log('上拉加载更多')\n      this.getHomeGoods(this.currentType);\n      // console.log(this.goods.new.page);\n      this.$refs.scroll.finishedPullUp();\n    }\n  },\n\n \n  computed: {\n    showGoods() {\n      return this.goods[this.currentType].list;\n    }\n  }\n};\n</script>\n\n<style scoped>\n#home {\n  height: 100vh;\n  position: relative;\n}\n.home-nav {\n  background-color: var(--color-tint);\n  color: white;\n  z-index: 2;\n}\n.tab-control {\n  position: relative;\n  z-index: 3;\n}\n\n.content{\n  position:absolute;\n  overflow: hidden;\n  top: 44px;\n  bottom: 49px;\n  left: 0;\n  right: 0;\n}\n\n.fiexd{\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 44px;\n}\n</style>\n"]}]}