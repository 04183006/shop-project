{"remainingRequest":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\src\\views\\home\\Home.vue","mtime":1582376509067},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86156\\Desktop\\Web - VUE\\Vue project\\vue-project\\vue-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZCYXIgZnJvbSAiY29tcG9uZW50cy9jb21tb24vbmF2YmFyL05hdkJhciI7CgppbXBvcnQgSG9tZVN3aXBlciBmcm9tICIuL2NoaWxkQ29tcHMvSG9tZVN3aXBlciI7CgppbXBvcnQgUmVjb21tZW5kVmlldyBmcm9tICIuL2NoaWxkQ29tcHMvUmVjb21tZW5kVmlldyI7CgppbXBvcnQgRmVhdHVyZVZpZXcgZnJvbSAiLi9jaGlsZENvbXBzL0ZlYXR1cmVWaWV3IjsKCmltcG9ydCBUYWJDb250cm9sIGZyb20gImNvbXBvbmVudHMvY29udGVudC90YWJDb250cm9sL1RhYkNvbnRyb2wiOwoKaW1wb3J0IEdvb2RzTGlzdCBmcm9tICJjb21wb25lbnRzL2NvbnRlbnQvZ29vZHMvR29vZHNMaXN0IjsKCmltcG9ydCBCU2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwiOwoKLy8gaW1wb3J0IEJhY2tUb3AgZnJvbSAnY29tcG9uZW50cy9jb250ZW50L2JhY2tUb3AvQmFja1RvcCcKCmltcG9ydCB7IGdldEhvbWVNdWx0aWRhdGEsIGdldEhvbWVHb29kcyB9IGZyb20gIm5ldHdvcmsvaG9tZSI7CgppbXBvcnQge2RlYm91bmNlfSBmcm9tICdjb21tb24vdXRpbHMnCgppbXBvcnQge2l0ZW1MaXN0ZW5lck1peGluLGJhY2tUb3BNaXhpbn0gZnJvbSAnY29tbW9uL21peGluJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIG1peGluczpbaXRlbUxpc3RlbmVyTWl4aW4sIGJhY2tUb3BNaXhpbl0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhbm5lcnM6IFtdLAogICAgICByZWNvbW1lbmRzOiBbXSwKICAgICAgY3VycmVudFR5cGU6ICJwb3AiLAogICAgICBzY3JvbGw6IG51bGwsCiAgICAgIC8vIGlzU2hvdzpmYWxzZSwKICAgICAgdGFiT2Zmc2V0VG9wOjAsCiAgICAgIGlzRml4ZWQ6ZmFsc2UsCiAgICAgIHNhdmVZOicnLAogICAgICBnb29kczogewogICAgICAgIHBvcDogeyBwYWdlOiAwLCBsaXN0OiBbXSB9LAogICAgICAgIG5ldzogeyBwYWdlOiAwLCBsaXN0OiBbXSB9LAogICAgICAgIHNlbGw6IHsgcGFnZTogMCwgbGlzdDogW10gfQogICAgICB9LAogICAgICBob21lSXRlbUxpc3RlbmVyOm51bGwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBOYXZCYXIsCiAgICBIb21lU3dpcGVyLAogICAgUmVjb21tZW5kVmlldywKICAgIEZlYXR1cmVWaWV3LAogICAgVGFiQ29udHJvbCwKICAgIEdvb2RzTGlzdCwKICAgIEJTY3JvbGwsCiAgICAvLyBCYWNrVG9wCiAgfSwKICBhY3RpdmF0ZWQoKXsKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2F2ZVkpOwogICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwgdGhpcy5zYXZlWSwgMCk7CiAgICB0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoKCk7CiAgfSwKICBkZWFjdGl2YXRlZCgpewogICAgLy8xLuS/neWtmFnlgLwKICAgIHRoaXMuc2F2ZVkgPSB0aGlzLiRyZWZzLnNjcm9sbC5nZXRTY3JvbGxZKCk7CiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNhdmVZKQoKICAgIC8vMi7lj5bmtojlhajlsYDkuovku7bnmoTnm5HlkKwKICAgIHRoaXMuJGJ1cy4kb2ZmKCdpdGVtSW1hZ2VMb2FkJyx0aGlzLmhvbWVJdGVtTGlzdGVuZXIpCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8xLuivt+axguWkmuS4quaVsOaNru+8iOS4u+imgeaYr+i9ruaSreWbvuWSjOS4i+mdoueahOaVsOaNru+8iQogICAgdGhpcy5nZXRIb21lTXVsdGlkYXRhKCk7CgogICAgLy8yLuivt+axguS4i+mdoueahOWVhuWTgeaVsOaNrgogICAgdGhpcy5nZXRIb21lR29vZHMoInBvcCIpOwogICAgdGhpcy5nZXRIb21lR29vZHMoIm5ldyIpOwogICAgdGhpcy5nZXRIb21lR29vZHMoInNlbGwiKTsKICB9LCAKICAgbW91bnRlZCgpIHsKICAgCiAgfSwKICBtZXRob2RzOiB7CiAgICAKCiAgICAvKioKICAgICAqIOS6i+S7tuebkeWQrOebuOWFs+aWueazlQogICAgICovCiAgICB0YWJDbGljayhpbmRleCkgewogICAgICBzd2l0Y2ggKGluZGV4KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICJwb3AiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICJuZXciOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICJzZWxsIjsKICAgICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICAvL+i/meagt+WunueOsOe7meS4pOS4qnRhYkNvbnRyb2zkv53mjIHkuIDoh7QKICAgICAgdGhpcy4kcmVmcy50YWJDb250cm9sMS5jdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgdGhpcy4kcmVmcy50YWJDb250cm9sMS5jdXJyZW50SW5kZXggPSBpbmRleDsKICAgIH0sCiAgICBzd2lwZXJJbWFnZSgpewogICAgICAgICAvLzIu6I635Y+WdGFiQ29udHJvbOeahG9mZmVzZXRUb3AKICAgIHRoaXMudGFiT2Zmc2V0VG9wID0gdGhpcy4kcmVmcy50YWJDb250cm9sMi4kZWwub2Zmc2V0VG9wOwogICAgfSwKICAgIC8qKgogICAgICog572R57uc6K+35rGC55u45YWz5pa55rOVCiAgICAgKi8KICAgIGdldEhvbWVNdWx0aWRhdGEoKSB7CiAgICAgIGdldEhvbWVNdWx0aWRhdGEoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsKICAgICAgICAvL+WkhOeQhuaVsOaNrgogICAgICAgIHRoaXMuYmFubmVycyA9IHJlcy5kYXRhLmJhbm5lci5saXN0OyAvL+Wwhuivt+axgueahOaVsOaNruWtmOWCqOi1t+adpe+8jOmBv+WFjeiiq+Weg+WcvuWbnuaUtgogICAgICAgIHRoaXMucmVjb21tZW5kcyA9IHJlcy5kYXRhLnJlY29tbWVuZC5saXN0OwogICAgICB9KTsKICAgIH0sCiAgICBnZXRIb21lR29vZHModHlwZSkgewogICAgICBjb25zdCBwYWdlID0gdGhpcy5nb29kc1t0eXBlXS5wYWdlICsgMTsgLy/or7fmsYLkuIvkuIDpobUKICAgICAgZ2V0SG9tZUdvb2RzKHR5cGUsIHBhZ2UpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpICAvL3BvcCDnrKzkuIDpobXnmoTliY0zMOadoeaVsOaNrgogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhLmxpc3QpCiAgICAgICAgdGhpcy5nb29kc1t0eXBlXS5saXN0LnB1c2goLi4ucmVzLmRhdGEubGlzdCk7CiAgICAgICAgdGhpcy5nb29kc1t0eXBlXS5wYWdlICs9IDE7CiAgICAgICAgLy/lpJrkuobkuIDnu4TmlbDmja7lsLHopoFwYWdlKzEKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdvb2RzKTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDov5Tlm57pobbpg6hiYWNrdG9w5Ye95pWwCiAgICAgKi8KICAgIC8vIGJhY2tUb3AoKXsKICAgIC8vICAgLy8gY29uc29sZS5sb2coJ2JhY2tUb3AnKTsKICAgIC8vICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwwKQogICAgLy8gfSwKICAgIAogICAgY29udGVudFNjcm9sbChwb3NpdGlvbil7CiAgICAgIC8vIC8vMS7liKTmlq1iYWNrVG9w5piv5ZCm5pi+56S6CiAgICAgIC8vIC8v5aSn5LqOMTAwMOiuvue9ruS4unRydWXvvIzlsI/kuo4xMDAw6K6+572u5Li6ZmFsc2UKICAgICAgLy8gdGhpcy5pc1Nob3cgPSAoLXBvc2l0aW9uLnkpID4gMTAwMDsKICAgICAgdGhpcy5saXN0ZW5TaG93QmFjayhwb3NpdGlvbik7CiAgICAgIAoKICAgICAgLy8yLuWIpOaWrXRhYkNvbnRyb2zmmK/lkKblkLjpobbmlYjmnpx7cG9zaXRpb246ZmlleGQ7fQogICAgICB0aGlzLmlzRml4ZWQgPSAoLXBvc2l0aW9uLnkpID4gdGhpcy50YWJPZmZzZXRUb3A7CgogICAgfSwKCiAgICAgLyoqCiAgICog5LiK5ouJ5Yqg6L295pu05aSaCiAgICovCiAgICBsb2FkTW9yZSgpewogICAgICAvLyBjb25zb2xlLmxvZygn5LiK5ouJ5Yqg6L295pu05aSaJykKICAgICAgdGhpcy5nZXRIb21lR29vZHModGhpcy5jdXJyZW50VHlwZSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ29vZHMubmV3LnBhZ2UpOwogICAgICB0aGlzLiRyZWZzLnNjcm9sbC5maW5pc2hlZFB1bGxVcCgpOwogICAgfQogIH0sCgogCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dHb29kcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZ29vZHNbdGhpcy5jdXJyZW50VHlwZV0ubGlzdDsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div id=\"home\">\n    <nav-bar class=\"home-nav\">\n      <div slot=\"center\">购物街</div>\n    </nav-bar>\n    <tab-control :titles=\"['流行','新款','精选']\" @tabClick=\"tabClick\" ref=\"tabControl1\" \n    v-show=\"isFixed\"  class=\"tab-control\" :class=\"{fiexd:isFixed}\"></tab-control>\n    <b-scroll class=\"content\" ref=\"scroll\"\n     :probe-type='3' \n     @scroll=\"contentScroll\"\n     :pull-up-load='true'\n     @pullingUp=\"loadMore\">\n      <home-swiper :banners=\"banners\" @swiperImageLoad=\"swiperImage\"></home-swiper>\n      <recommend-view :recommends=\"recommends\"></recommend-view>\n      <feature-view></feature-view>\n      <tab-control :titles=\"['流行','新款','精选']\" @tabClick=\"tabClick\" ref=\"tabControl2\"></tab-control>\n      <goods-list :goods=\"showGoods\"></goods-list>\n    </b-scroll>\n    <back-top @click.native=\"backTop\" v-show=\"isShow\"></back-top>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"components/common/navbar/NavBar\";\n\nimport HomeSwiper from \"./childComps/HomeSwiper\";\n\nimport RecommendView from \"./childComps/RecommendView\";\n\nimport FeatureView from \"./childComps/FeatureView\";\n\nimport TabControl from \"components/content/tabControl/TabControl\";\n\nimport GoodsList from \"components/content/goods/GoodsList\";\n\nimport BScroll from \"components/common/scroll/Scroll\";\n\n// import BackTop from 'components/content/backTop/BackTop'\n\nimport { getHomeMultidata, getHomeGoods } from \"network/home\";\n\nimport {debounce} from 'common/utils'\n\nimport {itemListenerMixin,backTopMixin} from 'common/mixin'\nexport default {\n  name: \"Home\",\n  mixins:[itemListenerMixin, backTopMixin],\n  data() {\n    return {\n      banners: [],\n      recommends: [],\n      currentType: \"pop\",\n      scroll: null,\n      // isShow:false,\n      tabOffsetTop:0,\n      isFixed:false,\n      saveY:'',\n      goods: {\n        pop: { page: 0, list: [] },\n        new: { page: 0, list: [] },\n        sell: { page: 0, list: [] }\n      },\n      homeItemListener:null\n    };\n  },\n  components: {\n    NavBar,\n    HomeSwiper,\n    RecommendView,\n    FeatureView,\n    TabControl,\n    GoodsList,\n    BScroll,\n    // BackTop\n  },\n  activated(){\n    // console.log(this.saveY);\n    this.$refs.scroll.scrollTo(0, this.saveY, 0);\n    this.$refs.scroll.refresh();\n  },\n  deactivated(){\n    //1.保存Y值\n    this.saveY = this.$refs.scroll.getScrollY();\n    // console.log(this.saveY)\n\n    //2.取消全局事件的监听\n    this.$bus.$off('itemImageLoad',this.homeItemListener)\n  },\n  created() {\n    //1.请求多个数据（主要是轮播图和下面的数据）\n    this.getHomeMultidata();\n\n    //2.请求下面的商品数据\n    this.getHomeGoods(\"pop\");\n    this.getHomeGoods(\"new\");\n    this.getHomeGoods(\"sell\");\n  }, \n   mounted() {\n   \n  },\n  methods: {\n    \n\n    /**\n     * 事件监听相关方法\n     */\n    tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = \"pop\";\n          break;\n        case 1:\n          this.currentType = \"new\";\n          break;\n        case 2:\n          this.currentType = \"sell\";\n          break;\n      }\n\n      //这样实现给两个tabControl保持一致\n      this.$refs.tabControl1.currentIndex = index;\n      this.$refs.tabControl1.currentIndex = index;\n    },\n    swiperImage(){\n         //2.获取tabControl的offesetTop\n    this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n    },\n    /**\n     * 网络请求相关方法\n     */\n    getHomeMultidata() {\n      getHomeMultidata().then(res => {\n        // console.log(res);\n        //处理数据\n        this.banners = res.data.banner.list; //将请求的数据存储起来，避免被垃圾回收\n        this.recommends = res.data.recommend.list;\n      });\n    },\n    getHomeGoods(type) {\n      const page = this.goods[type].page + 1; //请求下一页\n      getHomeGoods(type, page).then(res => {\n        // console.log(res)  //pop 第一页的前30条数据\n        // console.log(res.data.list)\n        this.goods[type].list.push(...res.data.list);\n        this.goods[type].page += 1;\n        //多了一组数据就要page+1\n        // console.log(this.goods);\n      });\n    },\n    /**\n     * 返回顶部backtop函数\n     */\n    // backTop(){\n    //   // console.log('backTop');\n    //   this.$refs.scroll.scrollTo(0,0)\n    // },\n    \n    contentScroll(position){\n      // //1.判断backTop是否显示\n      // //大于1000设置为true，小于1000设置为false\n      // this.isShow = (-position.y) > 1000;\n      this.listenShowBack(position);\n      \n\n      //2.判断tabControl是否吸顶效果{position:fiexd;}\n      this.isFixed = (-position.y) > this.tabOffsetTop;\n\n    },\n\n     /**\n   * 上拉加载更多\n   */\n    loadMore(){\n      // console.log('上拉加载更多')\n      this.getHomeGoods(this.currentType);\n      // console.log(this.goods.new.page);\n      this.$refs.scroll.finishedPullUp();\n    }\n  },\n\n \n  computed: {\n    showGoods() {\n      return this.goods[this.currentType].list;\n    }\n  }\n};\n</script>\n\n<style scoped>\n#home {\n  height: 100vh;\n  position: relative;\n}\n.home-nav {\n  background-color: var(--color-tint);\n  color: white;\n  z-index: 2;\n}\n.tab-control {\n  position: relative;\n  z-index: 3;\n}\n\n.content{\n  position:absolute;\n  overflow: hidden;\n  top: 44px;\n  bottom: 49px;\n  left: 0;\n  right: 0;\n}\n\n.fiexd{\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 44px;\n}\n</style>\n"]}]}